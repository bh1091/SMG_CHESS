package org.karthikmahadevan.hw7;

import org.karthikmahadevan.hw3.StateParser;
import org.shared.chess.Color;
import org.shared.chess.State;

public class MatchInfoParser {
	private String matchInfo;
	public MatchInfoParser(String matchInfo) {
		this.matchInfo = matchInfo;
	}
	public MatchInfo getMatchInfo() {
		String splitMatch[] = matchInfo.split("~");
		
		MatchInfo match = new MatchInfo();
		match.setMatchID(splitMatch[0]);
		
		String strState = splitMatch[1];
		if (!strState.equals("")) {
			StateParser parser = new StateParser(strState);
			match.setMatchState(parser.getState());
		}
		else {
			match.setMatchState(new State());
		}
		
		if (splitMatch[2].equals("W")) {
			match.setMyColor(Color.WHITE);
		}
		else {
			match.setMyColor(Color.BLACK);
		}
		
		match.setOpponent(splitMatch[3]);
		
		return match;
	}
}
